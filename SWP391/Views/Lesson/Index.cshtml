@*
    For more information on enabling MVC for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860
*@
@{
    ViewData["Title"] = "LESSON";
    Layout = "~/Views/Shared/_LayoutNoContainer.cshtml";
}
<style>
    .lesson-container {
        margin: 0 5%;
    }

    .lesson-main {
        margin: 0 0 10px 0;
    }
</style>
@await Html.PartialAsync("~/Views/Shared/Modal/Lesson/_ModalCourseOvw.cshtml")
<div class="lesson-container">
    <main role="main" class="pb-3">
        <div class="row lesson-main">
            <h1>Course Name</h1>
        </div>
        <div class="row">
            <div class="col-md-8">
                <div class="video">
                    <video src="https://www.html5rocks.com/en/tutorials/video/basics/devstories.mp4" width="100%" muted autoplay controls></video>
                    <h3 class="title">Title</h3>
                </div>
                    <div class="row lesson-main">
                        <div class="btn-group" role="group" aria-label="Basic example">
                            <button onclick="scriptToggle()" class="btn btn-outline-info" type="button" data-toggle="collapse" data-target="#collapseExample" aria-expanded="false" aria-controls="collapseExample">
                                Script
                            </button>
                            <button onclick="noteToggle()" class="btn btn-outline-info" type="button" data-toggle="collapse" data-target="#collapseExample2" aria-expanded="false" aria-controls="collapseExample">
                                Note
                            </button>
                        <button type="button" class="btn btn-outline-danger">Report</button>
                    </div>
                </div>
                        
            <div class="collapse" id="collapseExample">
              <div class="card card-body">
                Transcript
              </div>
            </div>
                        <div class="collapse" id="collapseExample2">
              <div class="card card-body">
                <h4 >Note here<br/><small style="font-size:15px">You can download your note</small></h4>
                
                <textarea class="text_mop"></textarea>
                <div class="row">
                <input type="button" class="btn_mop btn-primary btn" value="Download" aria-hidden="true" />
                </div>
              </div>
            </div>
            </div>
           

            <div class="col-md-4">

                <div class="accordion" id="accordionExample">
                    @for (var i = 0; i < 4; i++)
                   {
                        @:<div class="card">
                        <div class="card-header" id="@("headingOne" + i)">
                            <h2 class="mb-0">
                                <button class="btn btn-link" type="button" data-toggle="collapse" data-target="@("#collapseOne" + i)" aria-expanded="true" aria-controls="collapseOne">
                                    @("Topic #" + i)
                                </button>
                            </h2>
                        </div>

                        @:<div id="@("collapseOne" + i)" class="collapse" aria-labelledby="headingOne" data-parent="#accordionExample">
                           @:<div class="card-body">
                                @:<ul class="list-group">
                                    <li class="list-group-item">
                                        <p style="margin-bottom:0"><i class="far fa-play-circle"></i> vid1</p>
                                        <p class="title-vid" hidden>Title 1</p>
                                        <a href="src" hidden></a>
                                    </li>
                                    <li class="list-group-item">
                                        <p style="margin-bottom:0"><i class="far fa-play-circle"></i> vid2</p>
                                        <p class="title-vid" hidden>Title 2</p>
                                        <a href="src" hidden></a>
                                    </li>
                                    @*@:</br>*@
                                @:</ul>
                                <div class="list-group">
                                    <a href="src" class="list-group-item list-group-item-warning">
                                        Quiz
                                    </a>
                                </div>
                            @:</div>
                        @:</div>
                    @:</div>
                   }

                </div>
            </div>
        </div>
    </main>
</div>


<script>
function download(file, text) {
  //creating an invisible element
  var element = document.createElement('a');
  element.setAttribute('href', 'data:text/html;charset=utf-8,' + encodeURIComponent(text));
  element.setAttribute('download', file);
  document.body.appendChild(element);
  element.click();
  document.body.removeChild(element);
}

var btn_mop = document.getElementsByClassName("btn_mop");
for (var btn of btn_mop) {
  btn.addEventListener("click", function() {
    var text = this.previousSibling.previousSibling
    var filename = "Note.txt";
    download(filename, text.value)
  });
}
</script>


<style>
    .accordion .collapse .card-body .vid video {
        width: 100px;
        border-radius: 5px;
    }
</style>

<script>
    let hreflist = document.querySelectorAll('.list-group .list-group-item');
    let mainvideo = document.querySelector('.row .col-md-8 video');
    let maintitle = document.querySelector('.row .col-md-8 .title');

    hreflist.forEach(href => {
        href.onclick = () => {
            hreflist.forEach(vid => vid.classList.remove('active'));
            href.classList.add('active');
            if (href.classList.contains('active')) {
                let src = href.children[2].getAttribute('href');
                mainvideo.src = src;
                let title = href.children[1].innerHTML;
                maintitle.innerHTML = title;
            };
        };
    });

function scriptToggle() {
  document.getElementById("collapseExample2").classList.remove("show");
}
function noteToggle() {
  document.getElementById("collapseExample").classList.remove("show");
}

    document.addEventListener('DOMContentLoaded', function() {
        hreflist[0].classList.add("active");
        document.getElementById("collapseOne0").classList.add("show");

}, false);
   
</script>

<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>

<script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>